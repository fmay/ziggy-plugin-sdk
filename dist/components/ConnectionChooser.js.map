{"version":3,"file":"ConnectionChooser.js","sourceRoot":"","sources":["../../src/components/ConnectionChooser.tsx"],"names":[],"mappings":"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","sourcesContent":["import { FC, useEffect, useState } from 'react'\nimport SelectItems, { SelectItem, SelectItemsSelection } from './SelectItems.js'\n\n/**\n * Simplified ConnectionChooser component for Ziggy plugins\n * Unlike the main app version, connections must be provided as props\n */\n\nexport interface Connection {\n  uuid: string\n  name: string\n  type: string\n}\n\nexport interface ConnectionChooserProps {\n  /** Array of available connections to choose from */\n  connections: Connection[]\n  /** Currently selected connection UUID */\n  selectedUuid?: string\n  /** Callback when a connection is selected */\n  onSelect: (uuid: string, type: string) => void\n  /** Filter connections by types (optional) */\n  types?: string[]\n  /** Exclude specific connection UUIDs (optional) */\n  exclude?: string[]\n  /** Placeholder text (optional) */\n  placeholder?: string\n  /** Width in pixels (optional) */\n  width?: number\n  /** Whether the selector is disabled */\n  isDisabled?: boolean\n}\n\nconst ConnectionChooser: FC<ConnectionChooserProps> = ({\n  connections,\n  selectedUuid,\n  onSelect,\n  types = [],\n  exclude = [],\n  placeholder = 'Select a connection...',\n  width,\n  isDisabled = false,\n}) => {\n  const [filteredConnections, setFilteredConnections] = useState<Connection[]>([])\n  const [selectOptions, setSelectOptions] = useState<SelectItem[]>([])\n\n  useEffect(() => {\n    // Filter connections by type and exclude list\n    let filtered = connections\n\n    if (types.length > 0) {\n      filtered = filtered.filter(conn => types.includes(conn.type))\n    }\n\n    if (exclude.length > 0) {\n      filtered = filtered.filter(conn => !exclude.includes(conn.uuid))\n    }\n\n    setFilteredConnections(filtered)\n\n    // Convert to SelectItems format\n    const options: SelectItem[] = filtered.map(conn => ({\n      id: conn.uuid,\n      label: conn.name,\n      extraData: { type: conn.type },\n    }))\n\n    setSelectOptions(options)\n\n    // Auto-select if only one option and no selection\n    if (!selectedUuid && filtered.length === 1) {\n      onSelect(filtered[0].uuid, filtered[0].type)\n    }\n  }, [connections, types, exclude, selectedUuid, onSelect])\n\n  const handleSelect = (selection: SelectItemsSelection) => {\n    if (!selection || Array.isArray(selection)) {\n      return\n    }\n\n    const item = selection as SelectItem\n    const connection = filteredConnections.find(conn => conn.uuid === item.id)\n\n    if (connection) {\n      onSelect(connection.uuid, connection.type)\n    }\n  }\n\n  const getSelectedItem = (): SelectItem | undefined => {\n    if (!selectedUuid) return undefined\n    return selectOptions.find(opt => opt.id === selectedUuid)\n  }\n\n  return (\n    <div>\n      <SelectItems\n        items={selectOptions}\n        selectedItem={getSelectedItem()}\n        onSelect={handleSelect}\n        placeholder={placeholder}\n        clearable={false}\n        width={width}\n        isDisabled={isDisabled}\n      />\n    </div>\n  )\n}\n\nexport default ConnectionChooser\n"]}